{"ast":null,"code":"var _jsxFileName = \"/Users/milosdzeletovic/projects/me/dnd-armory/dnd-armory-next/components/modals/update-subclass/index.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { IoIosClose } from 'react-icons/io';\nimport { useForm } from 'react-hook-form';\nimport { useModal } from '../../../context/modal';\nimport { subclassTitle } from '../../../utils/character';\nimport SelectInput from '../../form/select-input';\nimport SubmitButton from '../../form/submit-button';\nimport Loader from '../../layout/loader';\nimport { useSubclassesQuery, useAddSubclassMutation } from '../../../generated/graphql';\nimport styles from './styles.module.css';\n\nconst UpdateSubclass = ({\n  characterId,\n  originalValue,\n  klassName\n}) => {\n  const {\n    closeModal\n  } = useModal();\n  const [subclassesResult] = useSubclassesQuery({\n    variables: {\n      klassName\n    }\n  });\n  const [, addSubclass] = useAddSubclassMutation();\n  const {\n    handleSubmit,\n    errors,\n    control,\n    watch\n  } = useForm({\n    mode: 'onSubmit',\n    defaultValues: {\n      subclass: originalValue.id ? originalValue : null\n    }\n  });\n\n  const onSubmit = async values => {\n    closeModal();\n    const subclassId = values.subclass.value;\n    const subclassResult = await addSubclass({\n      id: characterId,\n      subclassId\n    });\n\n    if (subclassResult.error) {\n      console.log('An error occured. Handle it later.');\n      return;\n    }\n  };\n\n  if (subclassesResult.fetching) {\n    return __jsx(\"div\", {\n      className: \"m-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, __jsx(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (subclassesResult.error) {\n    var _subclassesResult$err;\n\n    console.log(subclassesResult.error);\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, (subclassesResult === null || subclassesResult === void 0 ? void 0 : (_subclassesResult$err = subclassesResult.error) === null || _subclassesResult$err === void 0 ? void 0 : _subclassesResult$err.message) || 'Unknown error occurred');\n  }\n\n  const {\n    subclasses\n  } = subclassesResult.data;\n\n  if (!subclasses.length) {\n    return __jsx(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: styles.header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: styles.headerTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, __jsx(\"h1\", {\n      className: styles.heading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, subclassTitle[klassName])), __jsx(\"button\", {\n      className: styles.close,\n      onClick: closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, __jsx(IoIosClose, {\n      size: 25,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }))), __jsx(\"div\", {\n      className: \"p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, __jsx(\"p\", {\n      className: \"my-2 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, klassName, \" not supported yet. Working on it...\")));\n  }\n\n  return __jsx(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.headerTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, subclassTitle[klassName])), __jsx(\"button\", {\n    className: styles.close,\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, __jsx(IoIosClose, {\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }))), __jsx(\"div\", {\n    className: styles.formContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, __jsx(\"form\", {\n    className: styles.form,\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, __jsx(SelectInput, {\n    control: control,\n    value: watch('subclass'),\n    errors: errors,\n    label: '',\n    name: \"subclass\",\n    options: subclasses.map(el => {\n      return {\n        value: el.id,\n        label: el.name\n      };\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: styles.submitContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, __jsx(SubmitButton, {\n    text: \"Submit\",\n    loading: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport { UpdateSubclass as default };","map":{"version":3,"sources":["/Users/milosdzeletovic/projects/me/dnd-armory/dnd-armory-next/components/modals/update-subclass/index.tsx"],"names":["React","IoIosClose","useForm","useModal","subclassTitle","SelectInput","SubmitButton","Loader","useSubclassesQuery","useAddSubclassMutation","styles","UpdateSubclass","characterId","originalValue","klassName","closeModal","subclassesResult","variables","addSubclass","handleSubmit","errors","control","watch","mode","defaultValues","subclass","id","onSubmit","values","subclassId","value","subclassResult","error","console","log","fetching","message","subclasses","data","length","container","header","headerTitle","heading","close","formContainer","form","map","el","label","name","submitContainer","default"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { IoIosClose } from 'react-icons/io'\nimport { useForm } from 'react-hook-form'\n\nimport { useModal } from '../../../context/modal'\nimport { subclassTitle } from '../../../utils/character'\nimport SelectInput from '../../form/select-input'\nimport SubmitButton from '../../form/submit-button'\nimport Loader from '../../layout/loader'\n\nimport {\n  Character,\n  useSubclassesQuery,\n  useAddSubclassMutation,\n} from '../../../generated/graphql'\n\nimport styles from './styles.module.css'\n\ntype FormValues = Record<\n  string,\n  {\n    value: string\n    label: string\n  }\n>\n\ntype Props = {\n  characterId: Character['id']\n  originalValue: {\n    id: string | undefined\n    label: string | undefined\n  }\n  klassName: string\n}\n\nconst UpdateSubclass: React.FC<Props> = ({\n  characterId,\n  originalValue,\n  klassName,\n}) => {\n  const { closeModal } = useModal()\n\n  const [subclassesResult] = useSubclassesQuery({\n    variables: {\n      klassName,\n    },\n  })\n\n  const [, addSubclass] = useAddSubclassMutation()\n\n  const { handleSubmit, errors, control, watch } = useForm<FormValues>({\n    mode: 'onSubmit',\n    defaultValues: {\n      subclass: originalValue.id ? originalValue : null,\n    },\n  })\n\n  const onSubmit = async (values: FormValues) => {\n    closeModal()\n\n    const subclassId = (values.subclass as any).value\n\n    const subclassResult = await addSubclass({\n      id: characterId,\n      subclassId,\n    })\n\n    if (subclassResult.error) {\n      console.log('An error occured. Handle it later.')\n      return\n    }\n  }\n\n  if (subclassesResult.fetching) {\n    return (\n      <div className=\"m-8\">\n        <Loader />\n      </div>\n    )\n  }\n\n  if (subclassesResult.error) {\n    console.log(subclassesResult.error)\n    return (\n      <div>{subclassesResult?.error?.message || 'Unknown error occurred'}</div>\n    )\n  }\n\n  const { subclasses } = subclassesResult.data\n\n  if (!subclasses.length) {\n    return (\n      <div className={styles.container}>\n        <div className={styles.header}>\n          <div className={styles.headerTitle}>\n            {/* {icons[type]} */}\n            <h1 className={styles.heading}>{subclassTitle[klassName]}</h1>\n          </div>\n          <button className={styles.close} onClick={closeModal}>\n            <IoIosClose size={25} />\n          </button>\n        </div>\n        <div className=\"p-4\">\n          <p className=\"my-2 text-left\">\n            {klassName} not supported yet. Working on it...\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div className={styles.headerTitle}>\n          {/* {icons[type]} */}\n          <h1 className={styles.heading}>{subclassTitle[klassName]}</h1>\n        </div>\n        <button className={styles.close} onClick={closeModal}>\n          <IoIosClose size={25} />\n        </button>\n      </div>\n\n      <div className={styles.formContainer}>\n        <form className={styles.form} onSubmit={handleSubmit(onSubmit)}>\n          <SelectInput\n            control={control}\n            value={watch('subclass')}\n            errors={errors}\n            label={''}\n            name=\"subclass\"\n            options={subclasses.map((el) => {\n              return {\n                value: el.id,\n                label: el.name,\n              }\n            })}\n          />\n\n          <div className={styles.submitContainer}>\n            <SubmitButton text=\"Submit\" loading={false} />\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport { UpdateSubclass as default }\n"]},"metadata":{},"sourceType":"module"}